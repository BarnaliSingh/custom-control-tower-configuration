region: us-east-1
version: 2021-03-15

resources:
  - name: DenyRegions
    description: "Guardrails applied at OU level"
    resource_file: policies/DenyRegions.json
    deploy_method: scp
    deployment_targets:
      organizational_units:
        - Sandbox
        - Security

  - name: RestrictEC2InstanceTypes
    description: "Guardrails applied at specific accounts"
    resource_file: policies/RestrictEC2InstanceTypes.json
    deploy_method: scp
    parameters:
      - parameter_key: Operation
        parameter_value: Attach
    deployment_targets:
      target_account:  # Change from accounts to target_account
        account_id: "149078755360"
        operation: Attach

  - name: SecurityServicesProtection
    description: "Guardrails applied at both OU and account levels"
    resource_file: policies/SecurityServicesProtection.json
    deploy_method: scp
    parameters:
      - parameter_key: Operation
        parameter_value: Attach
    deployment_targets:
      organizational_units:
        - Child OU1
      target_account:  # Change from accounts to target_account
        account_id: "538885695112"
        operation: Attach
